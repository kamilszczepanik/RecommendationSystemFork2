{% extends 'base.html' %}

{% block title %}
Movies
{% endblock %}

{% block content %}
<h1>Movies Page</h1>
<p>Movies table joined</p>
<h3>Movies</h3>

<div class="movie-card-container">
    {% for movie_details in movies_details %}
    <div class="movie-card">
        <div class="movie-card-header">
            <img src="{{ movie_details.movie.photo_url }}" class="poster" alt="{{ movie_details.movie.title }} poster">
        </div>
        <div class="movie-card-body">
            <h4>
                <a href="{% url 'movie_app:movie_details' movie_id=movie_details.movie.movie_id %}">
                    {{ movie_details.movie.title }}
                </a>
            </h4>
            <p><strong>Year:</strong> {{ movie_details.movie.production_year }}</p>
            <p><strong>Rating:</strong> {{ movie_details.movie.rating }}</p>
            <p><strong>Votes:</strong> {{ movie_details.movie.votes }}</p>
            <p><strong>Genres:</strong>
                {% for genre in movie_details.genres %}
                    {{ genre.display_name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
            <p><strong>Directors:</strong>
                {% for director in movie_details.directors %}
                    {{ director.display_name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
            <p><strong>Cast:</strong>
                {% for cast in movie_details.casts %}
                    {{ cast.display_name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
            <div class="reviews">
                {% for review in movie_details.reviews %}
                <div class="review">
                    <b>{{ review.user }}</b>
                    <p>{{ review.review_text }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
